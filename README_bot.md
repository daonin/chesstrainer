# Chess Tactics Telegram Bot

Telegram-–±–æ—Ç –¥–ª—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ —à–∞—Ö–º–∞—Ç–Ω–æ–π —Ç–∞–∫—Ç–∏–∫–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ –¥—Ä–∏–ª–ª–æ–≤ –∏–∑ `trainer_output.sqlite`.

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üéØ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–∞–∫—Ç–∏—á–µ—Å–∫–∏—Ö –∑–∞–¥–∞—á –∏–∑ –≤–∞—à–∏—Ö –ø–∞—Ä—Ç–∏–π
- üñºÔ∏è –û—Ç—Ä–∏—Å–æ–≤–∫–∞ –ø–æ–∑–∏—Ü–∏–π –≤ PNG —Ñ–æ—Ä–º–∞—Ç–µ
- ü§ñ –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—Ç–≤–µ—Ç–æ–≤ —á–µ—Ä–µ–∑ Stockfish
- üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –¥—Ä–∏–ª–ª–∞–º
- üéöÔ∏è –£—Ä–æ–≤–Ω–∏ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ (–ª–µ–≥–∫–∏–π/—Å—Ä–µ–¥–Ω–∏–π/—Å–ª–æ–∂–Ω—ã–π)

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
pip install -r requirements_bot.txt
```

### 2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Stockfish

**macOS:**
```bash
brew install stockfish
```

**Ubuntu/Debian:**
```bash
sudo apt install stockfish
```

### 3. –°–æ–∑–¥–∞–Ω–∏–µ Telegram-–±–æ—Ç–∞

1. –ù–∞–π–¥–∏—Ç–µ [@BotFather](https://t.me/BotFather) –≤ Telegram
2. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤–æ–≥–æ –±–æ—Ç–∞: `/newbot`
3. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø–æ–ª—É—á–µ–Ω–Ω—ã–π —Ç–æ–∫–µ–Ω

### 4. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:
```bash
cp bot_config.env.example bot_config.env
```

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `bot_config.env`:
```bash
TELEGRAM_BOT_TOKEN=–≤–∞—à_—Ç–æ–∫–µ–Ω_–æ—Ç_BotFather
STOCKFISH_PATH=/opt/homebrew/bin/stockfish
CHESS_DB_PATH=./trainer_output.sqlite
```

### 5. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –¥—Ä–∏–ª–ª–æ–≤

–ï—Å–ª–∏ –µ—â–µ –Ω–µ —Å–æ–∑–¥–∞–ª–∏ –±–∞–∑—É —Å –¥—Ä–∏–ª–ª–∞–º–∏:
```bash
python chess_trainer_sqlite.py --user –≤–∞—à_username --months 2 --only-5plus0
```

## –ó–∞–ø—É—Å–∫

```bash
python run_bot.py
```

–ò–ª–∏ –Ω–∞–ø—Ä—è–º—É—é:
```bash
python telegram_chess_bot.py
```

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

1. **–°—Ç–∞—Ä—Ç:** `/start` - –≤—ã–±–æ—Ä —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ –∑–∞–¥–∞—á
2. **–†–µ—à–µ–Ω–∏–µ:** –û—Ç–ø—Ä–∞–≤—å—Ç–µ —Ö–æ–¥ –≤ —Ñ–æ—Ä–º–∞—Ç–µ SAN (–Ω–∞–ø—Ä–∏–º–µ—Ä: `Nf3`, `Qxh7+`)
3. **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:** `/stats` - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –¥—Ä–∏–ª–ª–∞–º
4. **–°–ø—Ä–∞–≤–∫–∞:** `/help` - —Å–ø–∏—Å–æ–∫ –∫–æ–º–∞–Ω–¥

### –§–æ—Ä–º–∞—Ç—ã —Ö–æ–¥–æ–≤

- –ü—Ä–æ—Å—Ç—ã–µ —Ö–æ–¥—ã: `e4`, `Nf3`, `Bc4`
- –í–∑—è—Ç–∏—è: `Nxe5`, `Qxh7`, `exd5`
- –®–∞—Ö: `Qh5+`, `Bb5+`
- –ú–∞—Ç: `Qh7#`
- –†–æ–∫–∏—Ä–æ–≤–∫–∏: `O-O`, `O-O-O`

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
‚îú‚îÄ‚îÄ telegram_chess_bot.py      # –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–¥ –±–æ—Ç–∞
‚îú‚îÄ‚îÄ run_bot.py                 # –°–∫—Ä–∏–ø—Ç –∑–∞–ø—É—Å–∫–∞ —Å –ø—Ä–æ–≤–µ—Ä–∫–∞–º–∏
‚îú‚îÄ‚îÄ requirements_bot.txt       # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ bot_config.env.example     # –ü—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ chess_trainer_sqlite.py    # –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –¥—Ä–∏–ª–ª–æ–≤
‚îî‚îÄ‚îÄ trainer_output.sqlite      # –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Å –¥—Ä–∏–ª–ª–∞–º–∏
```

## –ê–ª–≥–æ—Ä–∏—Ç–º —Ä–∞–±–æ—Ç—ã

1. **–ü–æ–ª—É—á–µ–Ω–∏–µ –∑–∞–¥–∞—á:** SQL-–∑–∞–ø—Ä–æ—Å –∫ —Ç–∞–±–ª–∏—Ü–µ `drills` —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π –ø–æ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏
2. **–û—Ç—Ä–∏—Å–æ–≤–∫–∞ –ø–æ–∑–∏—Ü–∏–π:** –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è FEN ‚Üí SVG ‚Üí PNG —á–µ—Ä–µ–∑ `python-chess`
3. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—Ç–≤–µ—Ç–æ–≤:** 
   - –ü—Ä—è–º–æ–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å `engine_best_san`
   - –ê–Ω–∞–ª–∏–∑ —á–µ—Ä–µ–∑ Stockfish –¥–ª—è –æ—Ü–µ–Ω–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞ —Ö–æ–¥–∞
   - –î–æ–ø—É—Å—Ç–∏–º–∞—è –ø–æ—Ç–µ—Ä—è ‚â§ 50 cp —Å—á–∏—Ç–∞–µ—Ç—Å—è —Ö–æ—Ä–æ—à–∏–º —Ö–æ–¥–æ–º

## –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –û—à–∏–±–∫–∞ "Stockfish not found"
–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ Stockfish —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∏ –ø—É—Ç—å –≤ `STOCKFISH_PATH` –∫–æ—Ä—Ä–µ–∫—Ç–µ–Ω.

### –û—à–∏–±–∫–∞ "Database not found"
–°–Ω–∞—á–∞–ª–∞ —Å–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ –¥—Ä–∏–ª–ª—ã —á–µ—Ä–µ–∑ `chess_trainer_sqlite.py`.

### –û—à–∏–±–∫–∞ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ –¥–æ—Å–∫–∏
–ï—Å–ª–∏ `cairosvg` –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –±–æ—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —É–ø—Ä–æ—â–µ–Ω–Ω—É—é –æ—Ç—Ä–∏—Å–æ–≤–∫—É —á–µ—Ä–µ–∑ PIL.

### –ü—Ä–æ–±–ª–µ–º—ã —Å —Ñ–æ—Ä–º–∞—Ç–æ–º —Ö–æ–¥–æ–≤
–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—É—é —à–∞—Ö–º–∞—Ç–Ω—É—é –Ω–æ—Ç–∞—Ü–∏—é (SAN). –ü—Ä–∏–º–µ—Ä—ã –≤ `/help`.

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ

- –ë–æ—Ç —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ç–µ–∫—É—â—É—é –∑–∞–¥–∞—á—É –≤ –ø–∞–º—è—Ç–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –±–µ—Ä–µ—Ç—Å—è –∏–∑ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –ø—Ä–æ–≥–æ–Ω–∞ (`MAX(run_id)`)
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è —Ä–∞–±–æ—Ç–∞ –±–µ–∑ Stockfish (—Ç–æ–ª—å–∫–æ –ø—Ä—è–º–æ–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ö–æ–¥–æ–≤)
